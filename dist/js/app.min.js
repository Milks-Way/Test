(()=>{"use strict";const e=document.querySelectorAll('a[href*="#"]');for(let t of e)t.addEventListener("click",(function(e){e.preventDefault();const s=t.getAttribute("href").substr(1);document.getElementById(s).scrollIntoView({behavior:"smooth",block:"start"})}));const t=document.querySelector(".comments__card-carousel");var s,n;document.querySelector(".comments__card-carousel + .card-controller"),new class extends class{constructor(e){this.target=e}event(e){let t;this.target.addEventListener("mousedown",(s=>{function n(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n),document.removeEventListener("mouseleave",n),t(null)}s.preventDefault(),t=e(s),window.addEventListener("mousemove",t),document.addEventListener("mouseleave",n),window.addEventListener("mouseup",n)})),this.target.addEventListener("touchstart",(s=>{function n(){window.removeEventListener("touchmove",t),window.removeEventListener("touchend",n),t(null)}t=e(s),window.addEventListener("touchmove",t),window.addEventListener("touchend",n),document.body.addEventListener("mouseleave",n)}))}getDistance(e){this.event((function(t){let s,n;return"touches"in t?(s=t.touches[0].clientX,n=t.touches[0].clientY):(s=t.clientX,n=t.clientY),function(t){return e(null===t?null:"touches"in t?{x:t.touches[0].clientX-s,y:t.touches[0].clientY-n}:{x:t.clientX-s,y:t.clientY-n})}}))}}{constructor(e,t){super(e),this.container=e,this.controllerElement=t,this.cards=e.querySelectorAll(".comments__card"),this.centerIndex=(this.cards.length-1)/2,this.cardWidth=this.cards[0].offsetWidth/this.container.offsetWidth*100,this.xScale={},window.addEventListener("resize",this.updateCardWidth.bind(this)),this.controllerElement&&this.controllerElement.addEventListener("keydown",this.controller.bind(this)),this.build(),super.getDistance(this.moveCards.bind(this))}updateCardWidth(){this.cardWidth=this.cards[0].offsetWidth/this.container.offsetWidth*100,this.build()}build(e=0){for(let e=0;e<this.cards.length;e++){const t=e-this.centerIndex,s=this.calcScale(t),n=this.calcScale2(t),c=-Math.abs(e-this.centerIndex),o=this.calcPos(t,n);this.xScale[t]=this.cards[e],this.updateCards(this.cards[e],{x:t,scale:s,leftPos:o,zIndex:c})}}controller(e){const t={...this.xScale};if(39===e.keyCode)for(let e in this.xScale)t[parseInt(e)-1<-this.centerIndex?this.centerIndex:parseInt(e)-1]=this.xScale[e];if(37==e.keyCode)for(let e in this.xScale)t[parseInt(e)+1>this.centerIndex?-this.centerIndex:parseInt(e)+1]=this.xScale[e];this.xScale=t;for(let e in t){const t=this.calcScale(e),s=this.calcScale2(e),n=this.calcPos(e,s),c=-Math.abs(e);this.updateCards(this.xScale[e],{x:e,scale:t,leftPos:n,zIndex:c})}}calcPos(e,t){let s;return e<0?(s=(100*t-this.cardWidth)/2,s):(s=100-(100*t+this.cardWidth)/2,s)}updateCards(e,t){(t.x||0==t.x)&&e.setAttribute("data-x",t.x),(t.scale||0==t.scale)&&(e.style.transform=`scale(${t.scale})`,0==t.scale?e.style.opacity=t.scale:e.style.opacity=1),t.leftPos&&(e.style.left=`${t.leftPos}%`),(t.zIndex||0==t.zIndex)&&(0==t.zIndex?e.classList.add("highlight"):e.classList.remove("highlight"),e.style.zIndex=t.zIndex)}calcScale2(e){let t;return e<=0?(t=1- -.4*e,t):e>0?(t=1-.4*e,t):void 0}calcScale(e){const t=1-.4*Math.pow(e,2);return t<=0?0:t}checkOrdering(e,t,s){const n=parseInt(e.dataset.x),c=Math.round(s);let o=t;t!==t+c&&(t+c>n?t+c>this.centerIndex&&(o=t+c-1-this.centerIndex-c-this.centerIndex):t+c<n&&t+c<-this.centerIndex&&(o=t+c+1+this.centerIndex-c+this.centerIndex),this.xScale[o+c]=e);const i=-Math.abs(o+c);return this.updateCards(e,{zIndex:i}),o}moveCards(e){let t;if(null!=e)this.container.classList.remove("smooth-return"),t=e.x/250;else{this.container.classList.add("smooth-return"),t=0;for(let e in this.xScale)this.updateCards(this.xScale[e],{x:e,zIndex:Math.abs(Math.abs(e)-this.centerIndex)})}for(let e=0;e<this.cards.length;e++){const s=this.checkOrdering(this.cards[e],parseInt(this.cards[e].dataset.x),t),n=this.calcScale(s+t),c=this.calcScale2(s+t),o=this.calcPos(s+t,c);this.updateCards(this.cards[e],{scale:n,leftPos:o})}}}(t),function e(t,s){let n=document.getElementById(t),c=n.querySelector(".hours"),o=n.querySelector(".minutes"),i=n.querySelector(".seconds");function r(){let t=function(e){let t=Date.parse(e)-Date.parse(new Date),s=Math.floor(t/1e3%60),n=Math.floor(t/1e3/60%60);return{total:t,hours:Math.floor(t/36e5%24),minutes:n,seconds:s}}(s);t.total<=0&&(clearInterval(a),e("countdown",new Date(Date.parse(new Date)+6e3))),c.innerHTML=("0"+t.hours).slice(-2),o.innerHTML=("0"+t.minutes).slice(-2),i.innerHTML=("0"+t.seconds).slice(-2)}r();let a=setInterval(r,1e3)}("countdown",new Date(Date.parse(new Date)+18e5)),document.getElementById("only_num").addEventListener("keydown",(function(e){46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||65==e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()})),s=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(n=new Image).onload=n.onerror=function(){s(2==n.height)},n.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})();